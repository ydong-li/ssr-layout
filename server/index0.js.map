{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./server/index.js","webpack:///./server/menu.js","webpack:///./src/layout.js","webpack:///external \"@ant-design/icons\"","webpack:///external \"antd\"","webpack:///external \"body-parser\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"process\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-router\"","webpack:///external \"request-promise-native\""],"names":["express","require","bodyParser","rp","path","fs","template","readFileSync","resolve","__dirname","app","use","json","static","req","res","next","test","headers","accept","url","getXWebContent","data","mainContent","renderToString","__html","end","replace","listen","menuConfig","config","Object","entries","find","routes","includes","Header","Sider","Content","Layout","SiderDemo","React","Component","state","collapsed","toggle","setState","render","padding","createElement","MenuUnfoldOutlined","MenuFoldOutlined","className","onClick","margin","minHeight","props","children"],"mappings":"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","file":"index0.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./server/index.js\");\n","// import proxy from 'express-http-proxy'\nimport React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport MLayout from \"../src/layout\";\nimport getXWebContent from \"./menu\";\nimport { nextTick } from \"process\";\nconst express = require(\"express\");\nvar bodyParser = require(\"body-parser\");\nconst rp = require(\"request-promise-native\");\nconst path = require(\"path\");\nconst fs = require(\"fs\");\n\nconst template = fs.readFileSync(\n  path.resolve(__dirname, \"../build/index.html\"),\n  \"utf8\"\n);\n\nconst app = express();\napp.use(bodyParser.json());\n\napp.use(express.static(\"build\"));\n\napp.use(async (req, res, next) => {\n  if (/text\\/html/.test(req.headers.accept)) {\n    const url = getXWebContent(req.path);\n    if (url) {\n      const data = await rp(`${url}/xWebContent?path=${req.path}`);\n      const mainContent = renderToString(\n        <MLayout>\n          {<div dangerouslySetInnerHTML={{ __html: data }}></div>}\n        </MLayout>\n      );\n      res.end(\n        template.replace(\n          /<div id=\"root\"><\\/div>/,\n          `<div id=\"root\">${mainContent}</div>`\n        )\n      );\n    } else {\n      res.end(template);\n    }\n  }\n});\n\napp.listen(3888);\n","const menuConfig = {\n  'http://localhost:3777': ['/x-web/b', '/x-web/c', '/p']\n}\n\nexport default function getXWebContent(path) {\n  let config =  Object.entries(menuConfig).find(([url, routes]) => routes.includes(path))\n  return config ? config[0] : null\n}\n","import React from \"react\";\nimport { Layout, Menu } from \"antd\";\nimport {\n  MenuUnfoldOutlined,\n  MenuFoldOutlined,\n  UserOutlined,\n  VideoCameraOutlined,\n} from \"@ant-design/icons\";\nimport { Link } from \"react-router\";\n\nconst { Header, Sider, Content } = Layout;\n\nexport default class SiderDemo extends React.Component {\n  state = {\n    collapsed: false,\n  };\n\n  toggle = () => {\n    this.setState({\n      collapsed: !this.state.collapsed,\n    });\n  };\n\n  render() {\n    return (\n      <Layout className=\"site-layout\" hasSider>\n        <Sider trigger={null} collapsible collapsed={this.state.collapsed}>\n          <div className=\"logo\" />\n          <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={[\"1\"]}>\n            <Menu.Item key=\"1\" icon={<UserOutlined />}>\n              <Link to=\"/x-web/b\">b</Link>\n            </Menu.Item>\n            <Menu.Item key=\"2\" icon={<VideoCameraOutlined />}>\n              <Link to=\"/x-web/c\">c</Link>\n            </Menu.Item>\n            <Menu.Item key=\"3\" icon={<VideoCameraOutlined />}>\n              <Link to=\"/p\">p</Link>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout>\n          <Header className=\"site-layout-background\" style={{ padding: 0 }}>\n            {React.createElement(\n              this.state.collapsed ? MenuUnfoldOutlined : MenuFoldOutlined,\n              {\n                className: \"trigger\",\n                onClick: this.toggle,\n              }\n            )}\n          </Header>\n          <Content\n            className=\"site-layout-background\"\n            style={{\n              margin: \"24px 16px\",\n              padding: 24,\n              minHeight: 280,\n            }}\n          >\n            {this.props.children}\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\n// function XWebContent(children) {\n//   if (typeof window === \"undefined\") {\n//     return children;\n//   } else {\n//     let xWeb = document.querySelector(\"#x-web\");\n//     console.log(\"xx\", xWeb);\n//     return (\n//       <div\n//         id=\"x-web\"\n//         dangerouslySetInnerHTML={{\n//           __html: xWeb ? xWeb.innerHTML : \"\",\n//         }}\n//       />\n//     );\n//   }\n// }\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"antd\");","module.exports = require(\"body-parser\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"process\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-router\");","module.exports = require(\"request-promise-native\");"],"sourceRoot":""}